{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"../../skia/core/AnimatedImage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":72},"end":{"line":3,"column":65,"index":137}}],"key":"LhU/Px6ZGN7Mh77TF9+qamLywNY=","exportNames":["*"]}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":205},"end":{"line":6,"column":36,"index":241}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAnimatedImageValue = void 0;\n  var _AnimatedImage = require(_dependencyMap[1], \"../../skia/core/AnimatedImage\");\n  var _ReanimatedProxy = _interopRequireDefault(require(_dependencyMap[2], \"./ReanimatedProxy\"));\n  var DEFAULT_FRAME_DURATION = 60;\n  var _worklet_10511549111576_init_data = {\n    code: \"function shopify_useAnimatedImageValueTs1(frameInfo){const{animatedImage,currentFrame,isPaused,lastTimestamp,frameDuration}=this.__closure;if(!animatedImage){currentFrame.value=null;return;}if(isPaused.value&&lastTimestamp.value!==-1){return;}const{timestamp:timestamp}=frameInfo;const elapsed=timestamp-lastTimestamp.value;if(elapsed<frameDuration){return;}animatedImage.decodeNextFrame();const oldFrame=currentFrame.value;currentFrame.value=animatedImage.getCurrentFrame();if(oldFrame){oldFrame.dispose();}lastTimestamp.value=timestamp;}\",\n    location: \"/Users/siddharth/projects/mobile/node_modules/@shopify/react-native-skia/src/external/reanimated/useAnimatedImageValue.ts\",\n    sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"shopify_useAnimatedImageValueTs1\\\",\\\"frameInfo\\\",\\\"animatedImage\\\",\\\"currentFrame\\\",\\\"isPaused\\\",\\\"lastTimestamp\\\",\\\"frameDuration\\\",\\\"__closure\\\",\\\"value\\\",\\\"timestamp\\\",\\\"elapsed\\\",\\\"decodeNextFrame\\\",\\\"oldFrame\\\",\\\"getCurrentFrame\\\",\\\"dispose\\\"],\\\"sources\\\":[\\\"/Users/siddharth/projects/mobile/node_modules/@shopify/react-native-skia/src/external/reanimated/useAnimatedImageValue.ts\\\"],\\\"mappings\\\":\\\"AAwBuB,QAAC,CAAAA,gCAAyBA,CAAAC,SAAA,QAAAC,aAAA,CAAAC,YAAA,CAAAC,QAAA,CAAAC,aAAA,CAAAC,aAAA,OAAAC,SAAA,CAC7C,GAAI,CAACL,aAAa,CAAE,CAClBC,YAAY,CAACK,KAAK,CAAG,IAAI,CACzB,OACF,CACA,GAAIJ,QAAQ,CAACI,KAAK,EAAIH,aAAa,CAACG,KAAK,GAAK,CAAC,CAAC,CAAE,CAChD,OACF,CACA,KAAM,CAAEC,SAAA,CAAAA,SAAU,CAAC,CAAGR,SAAS,CAC/B,KAAM,CAAAS,OAAO,CAAGD,SAAS,CAAGJ,aAAa,CAACG,KAAK,CAG/C,GAAIE,OAAO,CAAGJ,aAAa,CAAE,CAC3B,OACF,CAGAJ,aAAa,CAACS,eAAe,CAAC,CAAC,CAC/B,KAAM,CAAAC,QAAQ,CAAGT,YAAY,CAACK,KAAK,CACnCL,YAAY,CAACK,KAAK,CAAGN,aAAa,CAACW,eAAe,CAAC,CAAC,CACpD,GAAID,QAAQ,CAAE,CACZA,QAAQ,CAACE,OAAO,CAAC,CAAC,CACpB,CAGAT,aAAa,CAACG,KAAK,CAAGC,SAAS,CACjC\\\",\\\"ignoreList\\\":[]}\",\n    version: \"3.17.5\"\n  };\n  var useAnimatedImageValue = (source, paused) => {\n    var defaultPaused = _ReanimatedProxy.default.useSharedValue(false);\n    var isPaused = paused ?? defaultPaused;\n    var currentFrame = _ReanimatedProxy.default.useSharedValue(null);\n    var lastTimestamp = _ReanimatedProxy.default.useSharedValue(-1);\n    var animatedImage = (0, _AnimatedImage.useAnimatedImage)(source, err => {\n      console.error(err);\n      throw new Error(`Could not load animated image - got '${err.message}'`);\n    });\n    var frameDuration = animatedImage?.currentFrameDuration() || DEFAULT_FRAME_DURATION;\n    _ReanimatedProxy.default.useFrameCallback(function () {\n      var _e = [new global.Error(), -6, -27];\n      var shopify_useAnimatedImageValueTs1 = function (frameInfo) {\n        if (!animatedImage) {\n          currentFrame.value = null;\n          return;\n        }\n        if (isPaused.value && lastTimestamp.value !== -1) {\n          return;\n        }\n        var timestamp = frameInfo.timestamp;\n        var elapsed = timestamp - lastTimestamp.value;\n\n        // Check if it's time to switch frames based on GIF frame duration\n        if (elapsed < frameDuration) {\n          return;\n        }\n\n        // Update the current frame\n        animatedImage.decodeNextFrame();\n        var oldFrame = currentFrame.value;\n        currentFrame.value = animatedImage.getCurrentFrame();\n        if (oldFrame) {\n          oldFrame.dispose();\n        }\n\n        // Update the last timestamp\n        lastTimestamp.value = timestamp;\n      };\n      shopify_useAnimatedImageValueTs1.__closure = {\n        animatedImage,\n        currentFrame,\n        isPaused,\n        lastTimestamp,\n        frameDuration\n      };\n      shopify_useAnimatedImageValueTs1.__workletHash = 10511549111576;\n      shopify_useAnimatedImageValueTs1.__initData = _worklet_10511549111576_init_data;\n      shopify_useAnimatedImageValueTs1.__stackDetails = _e;\n      return shopify_useAnimatedImageValueTs1;\n    }());\n    return currentFrame;\n  };\n  exports.useAnimatedImageValue = useAnimatedImageValue;\n});","lineCount":70,"map":[[7,2,3,0],[7,6,3,0,"_AnimatedImage"],[7,20,3,0],[7,23,3,0,"require"],[7,30,3,0],[7,31,3,0,"_dependencyMap"],[7,45,3,0],[8,2,6,0],[8,6,6,0,"_ReanimatedProxy"],[8,22,6,0],[8,25,6,0,"_interopRequireDefault"],[8,47,6,0],[8,48,6,0,"require"],[8,55,6,0],[8,56,6,0,"_dependencyMap"],[8,70,6,0],[9,2,8,0],[9,6,8,6,"DEFAULT_FRAME_DURATION"],[9,28,8,28],[9,31,8,31],[9,33,8,33],[10,2,8,34],[10,6,8,34,"_worklet_10511549111576_init_data"],[10,39,8,34],[11,4,8,34,"code"],[11,8,8,34],[12,4,8,34,"location"],[12,12,8,34],[13,4,8,34,"sourceMap"],[13,13,8,34],[14,4,8,34,"version"],[14,11,8,34],[15,2,8,34],[16,2,10,7],[16,6,10,13,"useAnimatedImageValue"],[16,27,10,34],[16,30,10,37,"useAnimatedImageValue"],[16,31,11,2,"source"],[16,37,11,25],[16,39,12,2,"paused"],[16,45,12,31],[16,50,13,5],[17,4,14,2],[17,8,14,8,"defaultPaused"],[17,21,14,21],[17,24,14,24,"Rea"],[17,48,14,27],[17,49,14,28,"useSharedValue"],[17,63,14,42],[17,64,14,43],[17,69,14,48],[17,70,14,49],[18,4,15,2],[18,8,15,8,"isPaused"],[18,16,15,16],[18,19,15,19,"paused"],[18,25,15,25],[18,29,15,29,"defaultPaused"],[18,42,15,42],[19,4,16,2],[19,8,16,8,"currentFrame"],[19,20,16,20],[19,23,16,23,"Rea"],[19,47,16,26],[19,48,16,27,"useSharedValue"],[19,62,16,41],[19,63,16,58],[19,67,16,62],[19,68,16,63],[20,4,17,2],[20,8,17,8,"lastTimestamp"],[20,21,17,21],[20,24,17,24,"Rea"],[20,48,17,27],[20,49,17,28,"useSharedValue"],[20,63,17,42],[20,64,17,43],[20,65,17,44],[20,66,17,45],[20,67,17,46],[21,4,18,2],[21,8,18,8,"animatedImage"],[21,21,18,21],[21,24,18,24],[21,28,18,24,"useAnimatedImage"],[21,59,18,40],[21,61,18,41,"source"],[21,67,18,47],[21,69,18,50,"err"],[21,72,18,53],[21,76,18,58],[22,6,19,4,"console"],[22,13,19,11],[22,14,19,12,"error"],[22,19,19,17],[22,20,19,18,"err"],[22,23,19,21],[22,24,19,22],[23,6,20,4],[23,12,20,10],[23,16,20,14,"Error"],[23,21,20,19],[23,22,20,20],[23,62,20,60,"err"],[23,65,20,63],[23,66,20,64,"message"],[23,73,20,71],[23,76,20,74],[23,77,20,75],[24,4,21,2],[24,5,21,3],[24,6,21,4],[25,4,22,2],[25,8,22,8,"frameDuration"],[25,21,22,21],[25,24,23,4,"animatedImage"],[25,37,23,17],[25,39,23,19,"currentFrameDuration"],[25,59,23,39],[25,60,23,40],[25,61,23,41],[25,65,23,45,"DEFAULT_FRAME_DURATION"],[25,87,23,67],[26,4,25,2,"Rea"],[26,28,25,5],[26,29,25,6,"useFrameCallback"],[26,45,25,22],[26,46,25,23],[27,6,25,23],[27,10,25,23,"_e"],[27,12,25,23],[27,20,25,23,"global"],[27,26,25,23],[27,27,25,23,"Error"],[27,32,25,23],[28,6,25,23],[28,10,25,23,"shopify_useAnimatedImageValueTs1"],[28,42,25,23],[28,54,25,23,"shopify_useAnimatedImageValueTs1"],[28,55,25,24,"frameInfo"],[28,64,25,44],[28,66,25,49],[29,8,26,4],[29,12,26,8],[29,13,26,9,"animatedImage"],[29,26,26,22],[29,28,26,24],[30,10,27,6,"currentFrame"],[30,22,27,18],[30,23,27,19,"value"],[30,28,27,24],[30,31,27,27],[30,35,27,31],[31,10,28,6],[32,8,29,4],[33,8,30,4],[33,12,30,8,"isPaused"],[33,20,30,16],[33,21,30,17,"value"],[33,26,30,22],[33,30,30,26,"lastTimestamp"],[33,43,30,39],[33,44,30,40,"value"],[33,49,30,45],[33,54,30,50],[33,55,30,51],[33,56,30,52],[33,58,30,54],[34,10,31,6],[35,8,32,4],[36,8,33,4],[36,12,33,12,"timestamp"],[36,21,33,21],[36,24,33,26,"frameInfo"],[36,33,33,35],[36,34,33,12,"timestamp"],[36,43,33,21],[37,8,34,4],[37,12,34,10,"elapsed"],[37,19,34,17],[37,22,34,20,"timestamp"],[37,31,34,29],[37,34,34,32,"lastTimestamp"],[37,47,34,45],[37,48,34,46,"value"],[37,53,34,51],[39,8,36,4],[40,8,37,4],[40,12,37,8,"elapsed"],[40,19,37,15],[40,22,37,18,"frameDuration"],[40,35,37,31],[40,37,37,33],[41,10,38,6],[42,8,39,4],[44,8,41,4],[45,8,42,4,"animatedImage"],[45,21,42,17],[45,22,42,18,"decodeNextFrame"],[45,37,42,33],[45,38,42,34],[45,39,42,35],[46,8,43,4],[46,12,43,10,"oldFrame"],[46,20,43,18],[46,23,43,21,"currentFrame"],[46,35,43,33],[46,36,43,34,"value"],[46,41,43,39],[47,8,44,4,"currentFrame"],[47,20,44,16],[47,21,44,17,"value"],[47,26,44,22],[47,29,44,25,"animatedImage"],[47,42,44,38],[47,43,44,39,"getCurrentFrame"],[47,58,44,54],[47,59,44,55],[47,60,44,56],[48,8,45,4],[48,12,45,8,"oldFrame"],[48,20,45,16],[48,22,45,18],[49,10,46,6,"oldFrame"],[49,18,46,14],[49,19,46,15,"dispose"],[49,26,46,22],[49,27,46,23],[49,28,46,24],[50,8,47,4],[52,8,49,4],[53,8,50,4,"lastTimestamp"],[53,21,50,17],[53,22,50,18,"value"],[53,27,50,23],[53,30,50,26,"timestamp"],[53,39,50,35],[54,6,51,2],[54,7,51,3],[55,6,51,3,"shopify_useAnimatedImageValueTs1"],[55,38,51,3],[55,39,51,3,"__closure"],[55,48,51,3],[56,8,51,3,"animatedImage"],[56,21,51,3],[57,8,51,3,"currentFrame"],[57,20,51,3],[58,8,51,3,"isPaused"],[58,16,51,3],[59,8,51,3,"lastTimestamp"],[59,21,51,3],[60,8,51,3,"frameDuration"],[61,6,51,3],[62,6,51,3,"shopify_useAnimatedImageValueTs1"],[62,38,51,3],[62,39,51,3,"__workletHash"],[62,52,51,3],[63,6,51,3,"shopify_useAnimatedImageValueTs1"],[63,38,51,3],[63,39,51,3,"__initData"],[63,49,51,3],[63,52,51,3,"_worklet_10511549111576_init_data"],[63,85,51,3],[64,6,51,3,"shopify_useAnimatedImageValueTs1"],[64,38,51,3],[64,39,51,3,"__stackDetails"],[64,53,51,3],[64,56,51,3,"_e"],[64,58,51,3],[65,6,51,3],[65,13,51,3,"shopify_useAnimatedImageValueTs1"],[65,45,51,3],[66,4,51,3],[66,5,25,23],[66,7,51,3],[66,8,51,4],[67,4,52,2],[67,11,52,9,"currentFrame"],[67,23,52,21],[68,2,53,0],[68,3,53,1],[69,2,53,2,"exports"],[69,9,53,2],[69,10,53,2,"useAnimatedImageValue"],[69,31,53,2],[69,34,53,2,"useAnimatedImageValue"],[69,55,53,2],[70,0,53,2],[70,3]],"functionMap":{"names":["<global>","useAnimatedImageValue","useAnimatedImage$argument_1","Rea.useFrameCallback$argument_0"],"mappings":"AAA;qCCS;iDCQ;GDG;uBEI;GF0B;CDE"}},"type":"js/module"}]}